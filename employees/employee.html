<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <title>Employee Dashboard - VORDER</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="VORDER Employee Dashboard" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Bootstrap Stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        body {
            background: #f4f6f9;
            margin: 0;
            font-size: 14px;
        }

        .employee-wrapper {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .sidebar.collapsed {
            width: 60px;
        }

        .employee-profile {
            padding: 25px 20px;
            text-align: center;
            border-bottom: 1px solid #34495e;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #FF6B35, #ff8659);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .sidebar.collapsed .profile-avatar {
            width: 40px;
            height: 40px;
            font-size: 1rem;
        }

        .profile-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .profile-role {
            color: #FF6B35;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .profile-status {
            display: inline-block;
            padding: 4px 12px;
            background: #27ae60;
            color: white;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-top: 10px;
        }

        .sidebar.collapsed .profile-info {
            display: none;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #bdc3c7;
            text-decoration: none;
            transition: all 0.3s ease;
            border-radius: 0 25px 25px 0;
            margin-right: 10px;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(255, 107, 53, 0.2);
            color: #FF6B35;
        }

        .sidebar-menu a i {
            width: 20px;
            margin-right: 15px;
            text-align: center;
        }

        .sidebar.collapsed .sidebar-menu a span {
            display: none;
        }

        .sidebar.collapsed .sidebar-menu a {
            justify-content: center;
            padding: 12px 10px;
            margin-right: 0;
            border-radius: 8px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            transition: all 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 60px;
        }

        /* Top Bar */
        .topbar {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topbar-left {
            display: flex;
            align-items: center;
        }

        .toggle-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #666;
            margin-right: 20px;
            cursor: pointer;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .shift-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #e8f5e8;
            color: #27ae60;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .shift-status.off-duty {
            background: #fdf2f2;
            color: #e74c3c;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
        }

        .quick-btn {
            padding: 8px 12px;
            border: 2px solid #FF6B35;
            background: white;
            color: #FF6B35;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            background: #FF6B35;
            color: white;
            text-decoration: none;
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 30px;
        }

        /* Stats Cards */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 1.3rem;
        }

        .stat-card:nth-child(1) .stat-icon { background: #FF6B35; }
        .stat-card:nth-child(2) .stat-icon { background: #3498db; }
        .stat-card:nth-child(3) .stat-icon { background: #2ecc71; }
        .stat-card:nth-child(4) .stat-icon { background: #f39c12; }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7f8c8d;
            font-weight: 500;
        }

        /* Task Cards */
        .tasks-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .task-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .task-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .task-count {
            background: #FF6B35;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .task-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f1f3f4;
            transition: all 0.3s ease;
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-item:hover {
            background: #f8f9fa;
            margin: 0 -15px;
            padding: 12px 15px;
            border-radius: 8px;
        }

        .task-priority {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .priority-high { background: #e74c3c; }
        .priority-medium { background: #f39c12; }
        .priority-low { background: #2ecc71; }

        .task-info {
            flex: 1;
        }

        .task-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 2px;
        }

        .task-details {
            font-size: 0.85rem;
            color: #7f8c8d;
        }

        .task-time {
            font-size: 0.8rem;
            color: #95a5a6;
        }

        .task-action {
            padding: 6px 12px;
            background: #FF6B35;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .task-action:hover {
            background: #e55a2e;
        }

        /* Performance Card */
        .performance-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .performance-item {
            text-align: center;
        }

        .performance-score {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .score-excellent { color: #27ae60; }
        .score-good { color: #f39c12; }
        .score-average { color: #e74c3c; }

        .performance-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        /* Schedule Card */
        .schedule-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .schedule-day {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f1f3f4;
        }

        .schedule-date {
            width: 60px;
            text-align: center;
            font-weight: 600;
            color: #2c3e50;
        }

        .schedule-info {
            flex: 1;
            margin-left: 15px;
        }

        .schedule-shift {
            font-weight: 600;
            color: #2c3e50;
        }

        .schedule-hours {
            font-size: 0.85rem;
            color: #7f8c8d;
        }

        .schedule-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-upcoming {
            background: #e8f4fd;
            color: #3498db;
        }

        .status-today {
            background: #e8f5e8;
            color: #27ae60;
        }

        .status-completed {
            background: #f5f5f5;
            color: #95a5a6;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-left: 4px solid #FF6B35;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateX(100%);
            transition: all 0.3s ease;
            max-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }

            .sidebar.collapsed {
                width: 0;
            }

            .main-content {
                margin-left: 60px;
            }

            .main-content.expanded {
                margin-left: 0;
            }

            .topbar {
                padding: 15px 20px;
            }

            .dashboard-content {
                padding: 20px;
            }

            .tasks-section {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                display: none;
            }

            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="employee-wrapper">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="employee-profile">
                <div class="profile-avatar" id="profileAvatar">NX</div>
                <div class="profile-info">
                    <div class="profile-name" id="profileName">Nguyễn Văn X</div>
                    <div class="profile-role" id="profileRole">Shipper</div>
                    <div class="profile-status" id="profileStatus">Đang làm việc</div>
                </div>
            </div>
            <ul class="sidebar-menu">
                <li>
                    <a href="#" class="active" onclick="showSection('dashboard')">
                        <i class="fa fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('pickup')">
                        <i class="fa fa-hand-paper"></i>
                        <span>Lấy Hàng</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('delivery')">
                        <i class="fa fa-shipping-fast"></i>
                        <span>Giao Hàng</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('route')">
                        <i class="fa fa-route"></i>
                        <span>Tuyến Đường</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('checkin')">
                        <i class="fa fa-user-clock"></i>
                        <span>Chấm Công</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('support')">
                        <i class="fa fa-headset"></i>
                        <span>Hỗ Trợ</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('profile')">
                        <i class="fa fa-user-cog"></i>
                        <span>Cài Đặt</span>
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <i class="fa fa-home"></i>
                        <span>Trang Chủ</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="logout()">
                        <i class="fa fa-sign-out-alt"></i>
                        <span>Đăng Xuất</span>
                    </a>
                </li>
            </ul></span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('profile')">
                        <i class="fa fa-user-cog"></i>
                        <span>Cài Đặt</span>
                    </a>
                </li>
                <li>
                    <a href="index.html">
                        <i class="fa fa-home"></i>
                        <span>Trang Chủ</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="logout()">
                        <i class="fa fa-sign-out-alt"></i>
                        <span>Đăng Xuất</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Top Bar -->
            <div class="topbar">
                <div class="topbar-left">
                    <button class="toggle-btn" onclick="toggleSidebar()">
                        <i class="fa fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                <div class="topbar-right">
                    <div class="shift-status" id="shiftStatus">
                        <i class="fa fa-circle"></i>
                        <span>Đang làm việc</span>
                    </div>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="clockAction()">
                            <i class="fa fa-clock mr-1"></i>
                            <span id="clockText">Kết ca</span>
                        </button>
                        <button class="quick-btn" onclick="requestSupport()">
                            <i class="fa fa-question-circle mr-1"></i>Hỗ trợ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard-content" id="dashboardContent">
                <!-- Stats Cards -->
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fa fa-box"></i>
                        </div>
                        <div class="stat-number" id="todayDeliveries">12</div>
                        <div class="stat-label">Đơn Hôm Nay</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fa fa-check-circle"></i>
                        </div>
                        <div class="stat-number" id="completedDeliveries">8</div>
                        <div class="stat-label">Đã Hoàn Thành</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fa fa-star"></i>
                        </div>
                        <div class="stat-number">4.9</div>
                        <div class="stat-label">Đánh Giá TB</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fa fa-dollar-sign"></i>
                        </div>
                        <div class="stat-number">450K</div>
                        <div class="stat-label">Thu Nhập Tuần</div>
                    </div>
                </div>

                <!-- Tasks Section -->
                <div class="tasks-section">
                    <div class="task-card">
                        <div class="task-header">
                            <div class="task-title">Đơn Hàng Cần Giao</div>
                            <div class="task-count">4</div>
                        </div>
                        <ul class="task-list">
                            <li class="task-item">
                                <div class="task-priority priority-high"></div>
                                <div class="task-info">
                                    <div class="task-name">VOR123456789</div>
                                    <div class="task-details">Trần Thị B - Q1, TP.HCM</div>
                                </div>
                                <div class="task-time">10:30</div>
                                <button class="task-action" onclick="startDelivery('VOR123456789')">Bắt đầu</button>
                            </li>
                            <li class="task-item">
                                <div class="task-priority priority-medium"></div>
                                <div class="task-info">
                                    <div class="task-name">VOR987654321</div>
                                    <div class="task-details">Lê Văn C - Q2, TP.HCM</div>
                                </div>
                                <div class="task-time">11:15</div>
                                <button class="task-action" onclick="startDelivery('VOR987654321')">Bắt đầu</button>
                            </li>
                            <li class="task-item">
                                <div class="task-priority priority-low"></div>
                                <div class="task-info">
                                    <div class="task-name">VOR555666777</div>
                                    <div class="task-details">Phạm Thị D - Q3, TP.HCM</div>
                                </div>
                                <div class="task-time">14:00</div>
                                <button class="task-action" onclick="startDelivery('VOR555666777')">Bắt đầu</button>
                            </li>
                        </ul>
                    </div>

                    <div class="task-card">
                        <div class="task-header">
                            <div class="task-title">Đơn Đã Hoàn Thành</div>
                            <div class="task-count" style="background: #27ae60;">8</div>
                        </div>
                        <ul class="task-list">
                            <li class="task-item">
                                <div class="task-priority priority-high"></div>
                                <div class="task-info">
                                    <div class="task-name">VOR111222333</div>
                                    <div class="task-details">Hoàng Văn E - Q7, TP.HCM</div>
                                </div>
                                <div class="task-time">✓ 09:45</div>
                            </li>
                            <li class="task-item">
                                <div class="task-priority priority-medium"></div>
                                <div class="task-info">
                                    <div class="task-name">VOR444555666</div>
                                    <div class="task-details">Nguyễn Thị F - Q4, TP.HCM</div>
                                </div>
                                <div class="task-time">✓ 08:30</div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Performance Card -->
                <div class="performance-card">
                    <div class="task-title">Hiệu Suất Tuần Này</div>
                    <div class="performance-grid">
                        <div class="performance-item">
                            <div class="performance-score score-excellent">98%</div>
                            <div class="performance-label">Giao Thành Công</div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-score score-good">4.2</div>
                            <div class="performance-label">Giờ TB/Đơn</div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-score score-excellent">4.9</div>
                            <div class="performance-label">Đánh Giá</div>
                        </div>
                        <div class="performance-item">
                            <div class="performance-score score-good">42</div>
                            <div class="performance-label">Đơn Hoàn Thành</div>
                        </div>
                    </div>
                </div>

                <!-- Schedule Card -->
                <div class="schedule-card">
                    <div class="task-title">Lịch Làm Việc 7 Ngày Tới</div>
                    <div>
                        <div class="schedule-day">
                            <div class="schedule-date">T2<br>22/7</div>
                            <div class="schedule-info">
                                <div class="schedule-shift">Ca Sáng</div>
                                <div class="schedule-hours">07:00 - 15:00</div>
                            </div>
                            <div class="schedule-status status-upcoming">Sắp tới</div>
                        </div>
                        <div class="schedule-day">
                            <div class="schedule-date">T3<br>23/7</div>
                            <div class="schedule-info">
                                <div class="schedule-shift">Ca Chiều</div>
                                <div class="schedule-hours">13:00 - 21:00</div>
                            </div>
                            <div class="schedule-status status-upcoming">Sắp tới</div>
                        </div>
                        <div class="schedule-day">
                            <div class="schedule-date">T4<br>24/7</div>
                            <div class="schedule-info">
                                <div class="schedule-shift">Ca Sáng</div>
                                <div class="schedule-hours">07:00 - 15:00</div>
                            </div>
                            <div class="schedule-status status-upcoming">Sắp tới</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div style="display: flex; align-items: center;">
            <i class="fa fa-info-circle mr-2" style="color: #FF6B35;"></i>
            <span id="toastMessage">Thông báo</span>
            <button onclick="hideToast()" style="background: none; border: none; margin-left: 15px; color: #999;">
                <i class="fa fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        let isWorking = true;
        let currentEmployee = {
            name: 'Nguyễn Văn X',
            role: 'Shipper',
            avatar: 'NX',
            id: 'EMP001',
            hub: 'Hub TP.HCM 1'
        };

        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        }

        // Show Section
        function showSection(section) {
            // Update active menu
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.closest('a').classList.add('active');

            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'pickup': 'Lấy Hàng Hôm Nay',
                'delivery': 'Giao Hàng Hôm Nay',
                'route': 'Tuyến Đường',
                'checkin': 'Chấm Công',
                'support': 'Hỗ Trợ',
                'profile': 'Cài Đặt'
            };
            
            document.getElementById('pageTitle').textContent = titles[section] || 'Dashboard';

            // Generate content based on section
            const content = document.getElementById('dashboardContent');
            
            if (section === 'pickup') {
                content.innerHTML = generatePickupContent();
            } else if (section === 'delivery') {
                content.innerHTML = generateDeliveryContent();
            } else if (section === 'route') {
                content.innerHTML = generateRouteContent();
            } else if (section === 'checkin') {
                content.innerHTML = generateCheckinContent();
            } else if (section === 'support') {
                content.innerHTML = generateSupportContent();
            } else if (section === 'profile') {
                content.innerHTML = generateProfileContent();
            } else {
                // Keep dashboard content as is
                location.reload();
            }
        }

        // Generate Pickup Content - Đơn cần lấy hàng
        function generatePickupContent() {
            return `
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Đơn Hàng Cần Lấy Hôm Nay</h2>
                    <div class="badge bg-warning text-dark p-2">
                        <i class="fa fa-clock mr-1"></i>6 đơn chờ lấy
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="task-card">
                            <div class="task-header">
                                <div class="task-title">Danh Sách Lấy Hàng</div>
                                <button class="btn btn-sm btn-primary" onclick="optimizePickupRoute()">
                                    <i class="fa fa-route mr-1"></i>Tối ưu tuyến đường
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Thời Gian</th>
                                            <th>Người Gửi</th>
                                            <th>Địa Chỉ Lấy</th>
                                            <th>Loại Hàng</th>
                                            <th>Ghi Chú</th>
                                            <th>Thao Tác</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="background: #fff3cd;">
                                            <td><strong>08:30 - 09:00</strong></td>
                                            <td>
                                                Nguyễn Văn A<br>
                                                <small><i class="fa fa-phone"></i> 0901234567</small>
                                            </td>
                                            <td>
                                                123 Lê Lợi, Q1<br>
                                                <small><i class="fa fa-map-marker"></i> 1.2km</small>
                                            </td>
                                            <td>
                                                <span class="badge bg-info">Quần áo</span><br>
                                                <small>2kg, 30x20x10cm</small>
                                            </td>
                                            <td>
                                                <small>Lấy tại tầng 3, gọi trước 15p</small>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-success" onclick="startPickup('PU001')">
                                                    <i class="fa fa-play"></i> Bắt đầu
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>09:15 - 09:45</strong></td>
                                            <td>
                                                Trần Thị B<br>
                                                <small><i class="fa fa-phone"></i> 0987654321</small>
                                            </td>
                                            <td>
                                                456 Nguyễn Huệ, Q1<br>
                                                <small><i class="fa fa-map-marker"></i> 0.8km từ điểm trước</small>
                                            </td>
                                            <td>
                                                <span class="badge bg-warning">Điện tử</span><br>
                                                <small>1.5kg, Laptop</small>
                                            </td>
                                            <td>
                                                <small>Cần đóng gói cẩn thận</small>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-secondary" disabled>
                                                    <i class="fa fa-clock"></i> Chờ
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>10:00 - 10:30</strong></td>
                                            <td>
                                                Lê Văn C<br>
                                                <small><i class="fa fa-phone"></i> 0912345678</small>
                                            </td>
                                            <td>
                                                789 Điện Biên Phủ, Q3<br>
                                                <small><i class="fa fa-map-marker"></i> 2.5km</small>
                                            </td>
                                            <td>
                                                <span class="badge bg-danger">Dễ vỡ</span><br>
                                                <small>3kg, Gốm sứ</small>
                                            </td>
                                            <td>
                                                <small>Xử lý nhẹ nhàng, có bao bì</small>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-secondary" disabled>
                                                    <i class="fa fa-clock"></i> Chờ
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="task-card">
                            <div class="task-title mb-3">Bản Đồ Lấy Hàng</div>
                            <div style="height: 250px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; border: 2px dashed #ddd;">
                                <div style="text-align: center;">
                                    <i class="fa fa-map-marked-alt" style="font-size: 3rem; color: #ddd; margin-bottom: 10px;"></i>
                                    <p>Bản đồ tuyến lấy hàng</p>
                                    <small>Hiển thị 6 điểm lấy hàng hôm nay</small>
                                </div>
                            </div>
                        </div>

                        <div class="task-card mt-3">
                            <div class="task-title mb-3">Thống Kê Lấy Hàng</div>
                            <div class="row text-center">
                                <div class="col-6 mb-3">
                                    <div style="font-size: 2rem; font-weight: bold; color: #f39c12;">6</div>
                                    <small>Tổng cần lấy</small>
                                </div>
                                <div class="col-6 mb-3">
                                    <div style="font-size: 2rem; font-weight: bold; color: #27ae60;">2</div>
                                    <small>Đã lấy xong</small>
                                </div>
                                <div class="col-12">
                                    <div class="progress mb-2">
                                        <div class="progress-bar bg-success" style="width: 33%"></div>
                                    </div>
                                    <small>Tiến độ: 33% (2/6)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate Delivery Content - Đơn cần giao
        function generateDeliveryContent() {
            return `
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Đơn Hàng Cần Giao Hôm Nay</h2>
                    <div class="badge bg-primary p-2">
                        <i class="fa fa-truck mr-1"></i>8 đơn cần giao
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="task-card">
                            <div class="task-header">
                                <div class="task-title">Danh Sách Giao Hàng</div>
                                <div>
                                    <select class="form-select form-select-sm me-2" style="width: auto; display: inline-block;">
                                        <option>Tất cả ưu tiên</option>
                                        <option>Hỏa tốc</option>
                                        <option>Nhanh</option>
                                        <option>Tiêu chuẩn</option>
                                    </select>
                                    <button class="btn btn-sm btn-warning" onclick="optimizeDeliveryRoute()">
                                        <i class="fa fa-route mr-1"></i>Tuyến tối ưu
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Ưu Tiên</th>
                                            <th>Người Nhận</th>
                                            <th>Địa Chỉ Giao</th>
                                            <th>COD</th>
                                            <th>Ghi Chú</th>
                                            <th>Thao Tác</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="background: #ffebee;">
                                            <td>
                                                <span class="badge bg-danger">HỎA TỐC</span><br>
                                                <small>Trước 12h</small>
                                            </td>
                                            <td>
                                                Phạm Thị D<br>
                                                <small><i class="fa fa-phone"></i> 0923456789</small>
                                            </td>
                                            <td>
                                                321 Võ Văn Tần, Q3<br>
                                                <small><i class="fa fa-map-marker"></i> 3.2km</small>
                                            </td>
                                            <td>
                                                <strong style="color: #e74c3c;">450.000₫</strong>
                                            </td>
                                            <td>
                                                <small>Giao tận tay, không giao cho người khác</small>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-success" onclick="startDelivery('DEL001')">
                                                    <i class="fa fa-truck"></i> Giao ngay
                                                </button>
                                            </td>
                                        </tr>
                                        <tr style="background: #e3f2fd;">
                                            <td>
                                                <span class="badge bg-primary">NHANH</span><br>
                                                <small>Trong ngày</small>
                                            </td>
                                            <td>
                                                Hoàng Văn E<br>
                                                <small><i class="fa fa-phone"></i> 0934567890</small>
                                            </td>
                                            <td>
                                                654 Cách Mạng Tháng 8, Q10<br>
                                                <small><i class="fa fa-map-marker"></i> 4.1km</small>
                                            </td>
                                            <td>
                                                <strong style="color: #2196f3;">120.000₫</strong>
                                            </td>
                                            <td>
                                                <small>Gọi trước 30p, có thang máy</small>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-primary" onclick="startDelivery('DEL002')">
                                                    <i class="fa fa-play"></i> Bắt đầu
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="badge bg-secondary">TIÊU CHUẨN</span><br>
                                                <small>Linh hoạt</small>
                                            </td>
                                            <td>
                                                Nguyễn Thị F<br>
                                                <small><i class="fa fa-phone"></i> 0945678901</small>
                                            </td>
                                            <td>
                                                987 Lý Thường Kiệt, Q11<br>
                                                <small><i class="fa fa-map-marker"></i> 5.8km</small>
                                            </td>
                                            <td>
                                                <span style="color: #666;">Đã thanh toán</span>
                                            </td>
                                            <td>
                                                <small>Có thể giao cho bảo vệ tòa nhà</small>
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="scheduleDelivery('DEL003')">
                                                    <i class="fa fa-clock"></i> Lên lịch
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="task-card">
                            <div class="task-title mb-3">Bản Đồ Giao Hàng</div>
                            <div style="height: 250px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; border: 2px dashed #ddd;">
                                <div style="text-align: center;">
                                    <i class="fa fa-route" style="font-size: 3rem; color: #ddd; margin-bottom: 10px;"></i>
                                    <p>Tuyến giao hàng tối ưu</p>
                                    <small>8 điểm giao hàng trong ngày</small>
                                </div>
                            </div>
                        </div>

                        <div class="task-card mt-3">
                            <div class="task-title mb-3">COD Hôm Nay</div>
                            <div class="text-center mb-3">
                                <div style="font-size: 2.5rem; font-weight: bold; color: #e74c3c;">2.450.000₫</div>
                                <small>Tổng COD cần thu</small>
                            </div>
                            <div class="row text-center">
                                <div class="col-6">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #27ae60;">890.000₫</div>
                                    <small>Đã thu</small>
                                </div>
                                <div class="col-6">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #f39c12;">1.560.000₫</div>
                                    <small>Còn lại</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate Route Content
        function generateRouteContent() {
            return `
                <div class="mb-4">
                    <h2>Tuyến Đường Hôm Nay</h2>
                    <p class="text-muted">Tuyến đường được tối ưu hóa cho lấy hàng và giao hàng</p>
                </div>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="task-card">
                            <div class="task-header">
                                <div class="task-title">Bản Đồ Tuyến Đường</div>
                                <div>
                                    <button class="btn btn-sm btn-success me-2" onclick="startNavigation()">
                                        <i class="fa fa-navigation mr-1"></i>Bắt đầu dẫn đường
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="reoptimizeRoute()">
                                        <i class="fa fa-sync mr-1"></i>Tối ưu lại
                                    </button>
                                </div>
                            </div>
                            <div style="height: 400px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; border: 2px dashed #ddd;">
                                <div style="text-align: center;">
                                    <i class="fa fa-map" style="font-size: 4rem; color: #ddd; margin-bottom: 15px;"></i>
                                    <h4>Google Maps Integration</h4>
                                    <p>Hiển thị tuyến đường tối ưu từ lấy hàng đến giao hàng</p>
                                    <div class="d-flex justify-content-center gap-3 mt-3">
                                        <div class="text-center">
                                            <div style="background: #ff6b35; width: 20px; height: 20px; border-radius: 50%; margin: 0 auto;"></div>
                                            <small>Lấy hàng</small>
                                        </div>
                                        <div class="text-center">
                                            <div style="background: #3498db; width: 20px; height: 20px; border-radius: 50%; margin: 0 auto;"></div>
                                            <small>Giao hàng</small>
                                        </div>
                                        <div class="text-center">
                                            <div style="background: #27ae60; width: 20px; height: 20px; border-radius: 50%; margin: 0 auto;"></div>
                                            <small>Hoàn thành</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="task-card">
                            <div class="task-title mb-3">Thông Tin Tuyến Đường</div>
                            <div class="mb-3">
                                <strong>Tổng khoảng cách:</strong> 45.2 km<br>
                                <strong>Thời gian dự kiến:</strong> 6h 30p<br>
                                <strong>Điểm dừng:</strong> 14 địa điểm<br>
                                <strong>Mức tiêu thụ xăng:</strong> ~3.5L
                            </div>
                            <hr>
                            <div class="task-title mb-3">Lịch Trình</div>
                            <div class="timeline" style="max-height: 300px; overflow-y: auto;">
                                <div class="d-flex mb-3">
                                    <div style="background: #ff6b35; width: 12px; height: 12px; border-radius: 50%; margin-top: 4px; margin-right: 10px;"></div>
                                    <div>
                                        <strong>08:30</strong> Lấy hàng - Nguyễn Văn A<br>
                                        <small>123 Lê Lợi, Q1</small>
                                    </div>
                                </div>
                                <div class="d-flex mb-3">
                                    <div style="background: #ff6b35; width: 12px; height: 12px; border-radius: 50%; margin-top: 4px; margin-right: 10px;"></div>
                                    <div>
                                        <strong>09:15</strong> Lấy hàng - Trần Thị B<br>
                                        <small>456 Nguyễn Huệ, Q1</small>
                                    </div>
                                </div>
                                <div class="d-flex mb-3">
                                    <div style="background: #3498db; width: 12px; height: 12px; border-radius: 50%; margin-top: 4px; margin-right: 10px;"></div>
                                    <div>
                                        <strong>10:30</strong> Giao hàng - Phạm Thị D<br>
                                        <small>321 Võ Văn Tần, Q3</small>
                                    </div>
                                </div>
                                <div class="d-flex mb-3">
                                    <div style="background: #3498db; width: 12px; height: 12px; border-radius: 50%; margin-top: 4px; margin-right: 10px;"></div>
                                    <div>
                                        <strong>11:45</strong> Giao hàng - Hoàng Văn E<br>
                                        <small>654 Cách Mạng Tháng 8, Q10</small>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <small class="text-muted">... và 10 điểm khác</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Add new functions for employee-specific actions
        function startPickup(pickupId) {
            showToast(`Bắt đầu lấy hàng ${pickupId}. Đang mở GPS...`);
        }

        function optimizePickupRoute() {
            showToast('Đang tối ưu hóa tuyến lấy hàng...');
            setTimeout(() => {
                showToast('Đã tối ưu tuyến đường! Tiết kiệm 15 phút.');
            }, 2000);
        }

        function optimizeDeliveryRoute() {
            showToast('Đang tối ưu hóa tuyến giao hàng...');
            setTimeout(() => {
                showToast('Đã tối ưu tuyến đường! Tiết kiệm 22 phút.');
            }, 2000);
        }

        function scheduleDelivery(deliveryId) {
            showToast(`Đã lên lịch giao ${deliveryId} vào chiều nay`);
        }

        function startNavigation() {
            showToast('Đang khởi động dẫn đường GPS...');
            setTimeout(() => {
                alert('GPS: Hướng về phía Đông, đi thẳng 500m đến điểm lấy hàng đầu tiên');
            }, 1500);
        }

        // Generate Checkin Content
        function generateCheckinContent() {
            return `
                <div class="mb-4">
                    <h2>Chấm Công & Thời Gian Làm Việc</h2>
                    <p class="text-muted">Quản lý giờ làm việc và chấm công hàng ngày</p>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="task-card">
                            <div class="task-title mb-4">Chấm Công Hôm Nay</div>
                            <div class="text-center mb-4">
                                <div style="font-size: 3rem; font-weight: bold; color: #27ae60;" id="currentTime">08:45:32</div>
                                <div class="text-muted">Thứ Bảy, 19/07/2025</div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-6 text-center">
                                    <div class="border rounded p-3">
                                        <i class="fa fa-sign-in-alt text-success mb-2" style="font-size: 1.5rem;"></i>
                                        <div><strong>Giờ Vào</strong></div>
                                        <div style="font-size: 1.2rem; color: #27ae60;">07:30:15</div>
                                    </div>
                                </div>
                                <div class="col-6 text-center">
                                    <div class="border rounded p-3">
                                        <i class="fa fa-sign-out-alt text-warning mb-2" style="font-size: 1.5rem;"></i>
                                        <div><strong>Giờ Ra</strong></div>
                                        <div style="font-size: 1.2rem; color: #f39c12;">--:--:--</div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center">
                                <button class="btn btn-lg clock-out" onclick="clockOut()" style="width: 200px;">
                                    <i class="fa fa-clock mr-2"></i>Kết Ca Làm Việc
                                </button>
                            </div>
                        </div>

                        <div class="task-card mt-3">
                            <div class="task-title mb-3">Thống Kê Tuần Này</div>
                            <div class="row">
                                <div class="col-4 text-center">
                                    <div style="font-size: 1.8rem; font-weight: bold; color: #3498db;">45.5h</div>
                                    <small>Tổng giờ làm</small>
                                </div>
                                <div class="col-4 text-center">
                                    <div style="font-size: 1.8rem; font-weight: bold; color: #e74c3c;">2.5h</div>
                                    <small>Làm thêm</small>
                                </div>
                                <div class="col-4 text-center">
                                    <div style="font-size: 1.8rem; font-weight: bold; color: #27ae60;">98%</div>
                                    <small>Đúng giờ</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="task-card">
                            <div class="task-title mb-3">Lịch Sử Chấm Công</div>
                            <div style="max-height: 400px; overflow-y: auto;">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th>Ngày</th>
                                            <th>Giờ Vào</th>
                                            <th>Giờ Ra</th>
                                            <th>Tổng Giờ</th>
                                            <th>Trạng Thái</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="background: #e8f5e8;">
                                            <td><strong>19/07</strong></td>
                                            <td>07:30</td>
                                            <td>--:--</td>
                                            <td>--</td>
                                            <td><span class="badge bg-success">Đang làm</span></td>
                                        </tr>
                                        <tr>
                                            <td>18/07</td>
                                            <td>07:25</td>
                                            <td>17:10</td>
                                            <td>9h 45p</td>
                                            <td><span class="badge bg-success">Hoàn thành</span></td>
                                        </tr>
                                        <tr>
                                            <td>17/07</td>
                                            <td>07:35</td>
                                            <td>17:05</td>
                                            <td>9h 30p</td>
                                            <td><span class="badge bg-success">Hoàn thành</span></td>
                                        </tr>
                                        <tr>
                                            <td>16/07</td>
                                            <td>08:05</td>
                                            <td>17:15</td>
                                            <td>9h 10p</td>
                                            <td><span class="badge bg-warning">Đi muộn</span></td>
                                        </tr>
                                        <tr>
                                            <td>15/07</td>
                                            <td>07:20</td>
                                            <td>17:00</td>
                                            <td>9h 40p</td>
                                            <td><span class="badge bg-success">Hoàn thành</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate Support Content
        function generateSupportContent() {
            return `
                <div class="mb-4">
                    <h2>Hỗ Trợ Shipper</h2>
                    <p class="text-muted">Liên hệ hỗ trợ khi gặp sự cố trong quá trình làm việc</p>
                </div>

                <div class="row">
                    <div class="col-lg-4">
                        <div class="task-card">
                            <div class="task-title mb-3">Liên Hệ Khẩn Cấp</div>
                            <div class="d-grid gap-3">
                                <button class="btn btn-danger" onclick="emergencyCall()">
                                    <i class="fa fa-exclamation-triangle mr-2"></i>
                                    <strong>SOS - Khẩn Cấp</strong><br>
                                    <small>Tai nạn, cướp giật, nguy hiểm</small>
                                </button>
                                <button class="btn btn-warning" onclick="vehicleBreakdown()">
                                    <i class="fa fa-wrench mr-2"></i>
                                    <strong>Sự Cố Xe Máy</strong><br>
                                    <small>Hỏng xe, cần cứu hộ</small>
                                </button>
                                <button class="btn btn-info" onclick="customerIssue()">
                                    <i class="fa fa-user-times mr-2"></i>
                                    <strong>Vấn Đề Khách Hàng</strong><br>
                                    <small>Từ chối nhận, tranh chấp</small>
                                </button>
                            </div>
                        </div>

                        <div class="task-card mt-3">
                            <div class="task-title mb-3">Hotline Hỗ Trợ</div>
                            <div class="list-group list-group-flush">
                                <a href="tel:1900123456" class="list-group-item list-group-item-action">
                                    <i class="fa fa-phone text-primary mr-2"></i>
                                    <strong>Dispatcher: 1900 123 456</strong><br>
                                    <small>Hỗ trợ giao nhận 24/7</small>
                                </a>
                                <a href="tel:0901234567" class="list-group-item list-group-item-action">
                                    <i class="fa fa-user-tie text-success mr-2"></i>
                                    <strong>Trưởng Hub: 0901 234 567</strong><br>
                                    <small>Nguyễn Văn Quản - Hub HCM 1</small>
                                </a>
                                <button class="list-group-item list-group-item-action" onclick="openChat()">
                                    <i class="fa fa-comments text-warning mr-2"></i>
                                    <strong>Chat Hỗ Trợ</strong><br>
                                    <small>Nhắn tin trực tiếp với dispatcher</small>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-8">
                        <div class="task-card">
                            <div class="task-title mb-3">Báo Cáo Sự Cố</div>
                            <form onsubmit="submitIncident(event)">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Loại sự cố *</label>
                                        <select class="form-control" required>
                                            <option value="">Chọn loại sự cố</option>
                                            <option>Không liên hệ được khách hàng</option>
                                            <option>Địa chỉ giao hàng sai/không tồn tại</option>
                                            <option>Khách hàng từ chối nhận hàng</option>
                                            <option>Hàng hóa bị hư hỏng</option>
                                            <option>Xe máy hỏng/tai nạn</option>
                                            <option>Thất lạc hàng hóa</option>
                                            <option>Khác</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Mã đơn hàng</label>
                                        <input type="text" class="form-control" placeholder="VOR123456789">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Mô tả chi tiết *</label>
                                    <textarea class="form-control" rows="4" placeholder="Mô tả chi tiết sự cố, thời gian, địa điểm..." required></textarea>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Vị trí hiện tại</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="currentLocation" readonly>
                                            <button type="button" class="btn btn-outline-primary" onclick="getCurrentLocation()">
                                                <i class="fa fa-map-marker-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Hình ảnh minh chứng</label>
                                        <input type="file" class="form-control" multiple accept="image/*">
                                    </div>
                                </div>

                                <div class="text-end">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fa fa-paper-plane mr-2"></i>Gửi Báo Cáo
                                    </button>
                                </div>
                            </form>
                        </div>

                        <div class="task-card mt-3">
                            <div class="task-title mb-3">Báo Cáo Gần Đây</div>
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th>Thời Gian</th>
                                            <th>Loại Sự Cố</th>
                                            <th>Mã Đơn</th>
                                            <th>Trạng Thái</th>
                                            <th>Thao Tác</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>18/07 14:30</td>
                                            <td>Khách từ chối nhận</td>
                                            <td>VOR123456789</td>
                                            <td><span class="badge bg-success">Đã giải quyết</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewIncident('INC001')">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>17/07 10:15</td>
                                            <td>Địa chỉ không tồn tại</td>
                                            <td>VOR987654321</td>
                                            <td><span class="badge bg-warning">Đang xử lý</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="viewIncident('INC002')">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate Profile Content
        function generateProfileContent() {
            return `
                <div class="mb-4">
                    <h2>Thông Tin Cá Nhân</h2>
                    <p class="text-muted">Cập nhật thông tin và cài đặt tài khoản</p>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="task-card">
                            <div class="task-title mb-3">Thông Tin Shipper</div>
                            <form>
                                <div class="text-center mb-4">
                                    <div class="profile-avatar" style="width: 80px; height: 80px; font-size: 2rem; margin: 0 auto;">NX</div>
                                    <button type="button" class="btn btn-sm btn-outline-primary mt-2">
                                        <i class="fa fa-camera mr-1"></i>Đổi ảnh
                                    </button>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">Họ và tên</label>
                                    <input type="text" class="form-control" value="Nguyễn Văn X">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Số điện thoại</label>
                                    <input type="tel" class="form-control" value="0901234567">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" value="nguyenx@vorder.vn">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Địa chỉ</label>
                                    <textarea class="form-control" rows="2">123 Nguyễn Huệ, Q1, TP.HCM</textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">CCCD/CMND</label>
                                    <input type="text" class="form-control" value="079201234567">
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fa fa-save mr-2"></i>Cập Nhật
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="task-card">
                            <div class="task-title mb-3">Thông Tin Công Việc</div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <strong>Mã nhân viên:</strong><br>
                                    <span class="text-primary">EMP001</span>
                                </div>
                                <div class="col-6">
                                    <strong>Hub làm việc:</strong><br>
                                    Hub TP.HCM 1
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-6">
                                    <strong>Chức vụ:</strong><br>
                                    Shipper Senior
                                </div>
                                <div class="col-6">
                                    <strong>Ngày vào làm:</strong><br>
                                    15/01/2024
                                </div>
                            </div>
                            <div class="row mb-4">
                                <div class="col-6">
                                    <strong>Ca làm việc:</strong><br>
                                    Ca Sáng (07:00 - 15:00)
                                </div>
                                <div class="col-6">
                                    <strong>Khu vực phụ trách:</strong><br>
                                    Q1, Q3, Q4 TP.HCM
                                </div>
                            </div>

                            <hr>

                            <div class="task-title mb-3">Cài Đặt Ứng Dụng</div>
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked>
                                    <label class="form-check-label">Thông báo đơn hàng mới</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked>
                                    <label class="form-check-label">Âm thanh thông báo</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked>
                                    <label class="form-check-label">Chia sẻ vị trí GPS</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox">
                                    <label class="form-check-label">Chế độ tiết kiệm pin</label>
                                </div>
                            </div>

                            <hr>

                            <div class="task-title mb-3">Bảo Mật</div>
                            <button class="btn btn-outline-warning btn-sm mb-2 w-100" onclick="changePassword()">
                                <i class="fa fa-lock mr-2"></i>Đổi Mật Khẩu
                            </button>
                            <button class="btn btn-outline-danger btn-sm w-100" onclick="logout()">
                                <i class="fa fa-sign-out-alt mr-2"></i>Đăng Xuất Tất Cả Thiết Bị
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Additional employee-specific functions
        function clockOut() {
            if (confirm('Bạn có chắc muốn kết ca làm việc?')) {
                showToast('Đã kết ca làm việc lúc ' + new Date().toLocaleTimeString());
                isWorking = false;
                // Update UI
                document.getElementById('shiftStatus').innerHTML = '<i class="fa fa-circle"></i><span>Đã kết ca</span>';
                document.getElementById('shiftStatus').className = 'shift-status off-duty';
            }
        }

        function emergencyCall() {
            if (confirm('⚠️ BẠN ĐANG GỌI SOS KHẨN CẤP!\n\nChỉ sử dụng khi gặp nguy hiểm thực sự.\nTiếp tục?')) {
                alert('🚨 ĐÃ GỬI TÌNH HUỐNG KHẨN CẤP!\n\n• Vị trí GPS đã được gửi\n• Đội cứu hộ sẽ đến ngay\n• Hotline: 1900 123 456');
                showToast('SOS - Đã gửi cảnh báo khẩn cấp!');
            }
        }

        function vehicleBreakdown() {
            showToast('Đang liên hệ đội cứu hộ xe máy...');
            setTimeout(() => {
                alert('🛠️ CỨU HỘ XE MÁY\n\n• Đội cứu hộ sẽ đến trong 15-20 phút\n• Vui lòng đứng ở vị trí an toàn\n• Hotline: 0901 999 888');
            }, 1500);
        }

        function customerIssue() {
            showToast('Đang kết nối với dispatcher để hỗ trợ...');
            setTimeout(() => {
                alert('📞 HỖ TRỢ KHÁCH HÀNG\n\n• Dispatcher sẽ gọi lại trong 2-3 phút\n• Chuẩn bị thông tin đơn hàng\n• Giữ bình tĩnh và chuyên nghiệp');
            }, 1500);
        }

        function submitIncident(event) {
            event.preventDefault();
            showToast('Đang gửi báo cáo sự cố...');
            setTimeout(() => {
                showToast('Đã gửi báo cáo thành công! Mã số: INC' + Date.now());
                event.target.reset();
            }, 2000);
        }

        function getCurrentLocation() {
            showToast('Đang lấy vị trí GPS...');
            setTimeout(() => {
                document.getElementById('currentLocation').value = '123 Nguyễn Huệ, Q1, TP.HCM';
                showToast('Đã cập nhật vị trí hiện tại');
            }, 1500);
        }

        function changePassword() {
            const newPassword = prompt('Nhập mật khẩu mới:');
            if (newPassword) {
                showToast('Đã cập nhật mật khẩu thành công!');
            }
        }

        // Update current time for checkin page
        function updateCurrentTime() {
            const now = new Date();
            const timeElement = document.getElementById('currentTime');
            if (timeElement) {
                timeElement.textContent = now.toLocaleTimeString();
            }
        }

        // Update time every second
        setInterval(updateCurrentTime, 1000);

        // Clock In/Out Action
        function clockAction() {
            const statusElement = document.getElementById('shiftStatus');
            const clockText = document.getElementById('clockText');
            const profileStatus = document.getElementById('profileStatus');
            
            if (isWorking) {
                // Clock out
                isWorking = false;
                statusElement.innerHTML = '<i class="fa fa-circle"></i><span>Nghỉ ca</span>';
                statusElement.className = 'shift-status off-duty';
                clockText.textContent = 'Bắt đầu ca';
                profileStatus.textContent = 'Nghỉ ca';
                profileStatus.style.background = '#e74c3c';
                showToast('Đã kết thúc ca làm việc. Hẹn gặp lại!');
            } else {
                // Clock in
                isWorking = true;
                statusElement.innerHTML = '<i class="fa fa-circle"></i><span>Đang làm việc</span>';
                statusElement.className = 'shift-status';
                clockText.textContent = 'Kết ca';
                profileStatus.textContent = 'Đang làm việc';
                profileStatus.style.background = '#27ae60';
                showToast('Chào mừng bắt đầu ca làm việc!');
            }
        }

        // Request Support
        function requestSupport() {
            showToast('Đang kết nối với đội hỗ trợ...');
            setTimeout(() => {
                alert('Đội hỗ trợ sẽ liên hệ với bạn trong 2-3 phút!');
            }, 1500);
        }

        // Start Delivery
        function startDelivery(orderId) {
            showToast(`Đã bắt đầu giao đơn ${orderId}`);
            // In real app, would update backend and UI
        }

        // Complete Delivery
        function completeDelivery(orderId) {
            if (confirm(`Xác nhận hoàn thành đơn ${orderId}?`)) {
                showToast(`Đã hoàn thành đơn ${orderId}`);
                // Update completed count
                const completed = document.getElementById('completedDeliveries');
                if (completed) {
                    completed.textContent = parseInt(completed.textContent) + 1;
                }
            }
        }

        // Show Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Hide Toast
        function hideToast() {
            document.getElementById('toast').classList.remove('show');
        }

        // Logout function
        function logout() {
            if (confirm('Bạn có chắc muốn đăng xuất?')) {
                localStorage.removeItem('vorder_employee');
                showToast('Đã đăng xuất thành công!');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1500);
            }
        }

        // Handle responsive sidebar
        function handleResize() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (window.innerWidth <= 768) {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
            } else {
                sidebar.classList.remove('collapsed');
                mainContent.classList.remove('expanded');
            }
        }

        // Initialize employee data
        function initializeEmployee() {
            // Load from localStorage or set default
            const savedEmployee = localStorage.getItem('vorder_employee');
            if (savedEmployee) {
                currentEmployee = JSON.parse(savedEmployee);
            } else {
                // Demo employee data
                localStorage.setItem('vorder_employee', JSON.stringify(currentEmployee));
            }
            
            // Update UI with employee data
            document.getElementById('profileName').textContent = currentEmployee.name;
            document.getElementById('profileRole').textContent = currentEmployee.role;
            document.getElementById('profileAvatar').textContent = currentEmployee.avatar;
        }

        // Real-time updates simulation
        function simulateUpdates() {
            const events = [
                'Có đơn hàng mới được phân công',
                'Khách hàng yêu cầu thay đổi địa chỉ',
                'Cập nhật tuyến đường tối ưu',
                'Reminder: Ca làm việc sắp kết thúc'
            ];
            
            setInterval(() => {
                if (Math.random() < 0.1) { // 10% chance every 30 seconds
                    const event = events[Math.floor(Math.random() * events.length)];
                    showToast(event);
                }
            }, 30000);
        }

        // Auto-update delivery count
        function updateDeliveryStats() {
            if (Math.random() < 0.3) {
                const todayElement = document.getElementById('todayDeliveries');
                const completedElement = document.getElementById('completedDeliveries');
                
                if (todayElement && completedElement) {
                    const today = parseInt(todayElement.textContent);
                    const completed = parseInt(completedElement.textContent);
                    
                    if (completed < today && Math.random() < 0.5) {
                        completedElement.textContent = completed + 1;
                        showToast('Đã cập nhật thống kê giao hàng');
                    }
                }
            }
        }

        // Initialize responsive check
        handleResize();
        window.addEventListener('resize', handleResize);

        // Initialize on page load
        window.addEventListener('load', function() {
            initializeEmployee();
            simulateUpdates();
            
            // Show welcome message
            setTimeout(() => {
                showToast(`Chào mừng ${currentEmployee.name}! Bạn có 4 đơn hàng cần giao hôm nay.`);
            }, 1000);
        });

        // Update stats every 60 seconds
        setInterval(updateDeliveryStats, 60000);

        // Quick keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        showSection('dashboard');
                        break;
                    case '2':
                        e.preventDefault();
                        showSection('tasks');
                        break;
                    case '3':
                        e.preventDefault();
                        showSection('deliveries');
                        break;
                    case 'h':
                        e.preventDefault();
                        requestSupport();
                        break;
                }
            }
        });
    </script>
</body>

</html>